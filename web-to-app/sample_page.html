<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Website Title</title>
    <meta name="ad.size" content="width=0,height=0">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <style>
        * {
            padding: 0;
            margin: 0;
            box-sizing: border-box;
        }
        .title {
            padding-left: 1.2rem;
            padding-right: 1.2rem;
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: bold;
            color: #000000;
        }
        .desc {
            padding-left: 1.2rem;
            padding-right: 1.2rem;
            font-size: 0.8rem;
            font-weight: 400;
            color: #000000;
            line-height: 1.22rem;
            text-align: justify;
            white-space: pre-wrap;
            padding-bottom: 0.5rem;
        }
        .button {
            display: block;
            width: 90%;
            height: 2.59rem;
            background: #03c4ff;
            border-radius: 0.5rem;
            margin: 0 auto;
            font-size: 1rem;
            font-weight: bold;
            color: #FFFFFF;
            text-align: center;
            line-height: 2.59rem;
            text-decoration:none;
        }
        .button:active {
            opacity: 0.8;
        }
        .bottom-box {
            position: fixed;
            bottom: 0;
            /* for iPhone bottom safe area */
            bottom: calc(constant(safe-area-inset-bottom));
            bottom: calc(env(safe-area-inset-bottom));
            left: 0;
            width: 100%;
            padding-top: 0.67rem;
            padding-bottom: 0.67rem;
            background-color: #ffffff;
        }
        .placeholder {
            height: 4.44rem;
        }
    </style>
    <!-- please edit the googleCode, conversionId, iOSUrl and androidUrl -->
    <script>
        var itemId = '12345678';
        var redirectAction = '';
        var googleCode = 'AW-123456789/ABCDEFGHJI123456';
        var conversionId = 'AW-123456789';
        var iOSUrl = 'https://itunes.apple.com/app/id123456789';
        var androidUrl = 'market://details?id=com.company.app';
    </script>
    <!-- Global site tag (gtag.js) - Google Ads: AW-123456789, please edit -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-123456789"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', conversionId);
    </script>
</head>
<body>
    <div style="height: 100vh; overflow-y: auto;position: relative;">
        <h1 class="title">Some Title</h1>
        <p class="desc">Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text Some Text </p>
        <img src="creative.jpeg" width="100%">
        <div class="placeholder"></div>
        <div class="bottom-box">
            <div id="continue-button" style="background: #009dcd;color: #FFFFFF;font-size: 1rem;" class="button" data-clipboard-action="copy" data-clipboard-target="#copyDiv">Continue Button</div>
            <div style="position:absolute;left: -20000px;" id="copyDiv"></div>
        </div>
        <script>
            !function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.ClipboardJS=e():t.ClipboardJS=e()}(this,function(){return n={686:function(t,e,n){"use strict";n.d(e,{default:function(){return o}});var e=n(279),i=n.n(e),e=n(370),u=n.n(e),e=n(817),c=n.n(e);function a(t){try{return document.execCommand(t)}catch(t){return}}var f=function(t){t=c()(t);return a("cut"),t};var l=function(t){var e,n,o,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body},i="";return"string"==typeof t?(e=t,n="rtl"===document.documentElement.getAttribute("dir"),(o=document.createElement("textarea")).style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[n?"right":"left"]="-9999px",n=window.pageYOffset||document.documentElement.scrollTop,o.style.top="".concat(n,"px"),o.setAttribute("readonly",""),o.value=e,o=o,r.container.appendChild(o),i=c()(o),a("copy"),o.remove()):(i=c()(t),a("copy")),i};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=t.action,n=void 0===e?"copy":e,o=t.container,e=t.target,t=t.text;if("copy"!==n&&"cut"!==n)throw new Error('Invalid "action" value, use either "copy" or "cut"');if(void 0!==e){if(!e||"object"!==r(e)||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===n&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===n&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes')}return t?l(t,{container:o}):e?"cut"===n?f(e):l(e,{container:o}):void 0};function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function d(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function y(t,e){return(y=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function h(n){var o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var t,e=m(n);return t=o?(t=m(this).constructor,Reflect.construct(e,arguments,t)):e.apply(this,arguments),e=this,!(t=t)||"object"!==p(t)&&"function"!=typeof t?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(e):t}}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function v(t,e){t="data-clipboard-".concat(t);if(e.hasAttribute(t))return e.getAttribute(t)}var o=function(){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&y(t,e)}(r,i());var t,e,n,o=h(r);function r(t,e){var n;return function(t){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this),(n=o.call(this)).resolveOptions(e),n.listenClick(t),n}return t=r,n=[{key:"copy",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{container:document.body};return l(t,e)}},{key:"cut",value:function(t){return f(t)}},{key:"isSupported",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:["copy","cut"],t="string"==typeof t?[t]:t,e=!!document.queryCommandSupported;return t.forEach(function(t){e=e&&!!document.queryCommandSupported(t)}),e}}],(e=[{key:"resolveOptions",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===p(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=u()(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget,n=this.action(e)||"copy",t=s({action:n,container:this.container,target:this.target(e),text:this.text(e)});this.emit(t?"success":"error",{action:n,text:t,trigger:e,clearSelection:function(){e&&e.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(t){return v("action",t)}},{key:"defaultTarget",value:function(t){t=v("target",t);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(t){return v("text",t)}},{key:"destroy",value:function(){this.listener.destroy()}}])&&d(t.prototype,e),n&&d(t,n),r}()},828:function(t){var e;"undefined"==typeof Element||Element.prototype.matches||((e=Element.prototype).matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector),t.exports=function(t,e){for(;t&&9!==t.nodeType;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}},438:function(t,e,n){var u=n(828);function i(t,e,n,o,r){var i=function(e,n,t,o){return function(t){t.delegateTarget=u(t.target,n),t.delegateTarget&&o.call(e,t)}}.apply(this,arguments);return t.addEventListener(n,i,r),{destroy:function(){t.removeEventListener(n,i,r)}}}t.exports=function(t,e,n,o,r){return"function"==typeof t.addEventListener?i.apply(null,arguments):"function"==typeof n?i.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return i(t,e,n,o,r)}))}},879:function(t,n){n.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},n.nodeList=function(t){var e=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===e||"[object HTMLCollection]"===e)&&"length"in t&&(0===t.length||n.node(t[0]))},n.string=function(t){return"string"==typeof t||t instanceof String},n.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},370:function(t,e,n){var f=n(879),l=n(438);t.exports=function(t,e,n){if(!t&&!e&&!n)throw new Error("Missing required arguments");if(!f.string(e))throw new TypeError("Second argument must be a String");if(!f.fn(n))throw new TypeError("Third argument must be a Function");if(f.node(t))return c=e,a=n,(u=t).addEventListener(c,a),{destroy:function(){u.removeEventListener(c,a)}};if(f.nodeList(t))return o=t,r=e,i=n,Array.prototype.forEach.call(o,function(t){t.addEventListener(r,i)}),{destroy:function(){Array.prototype.forEach.call(o,function(t){t.removeEventListener(r,i)})}};if(f.string(t))return t=t,e=e,n=n,l(document.body,t,e,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList");var o,r,i,u,c,a}},817:function(t){t.exports=function(t){var e,n="SELECT"===t.nodeName?(t.focus(),t.value):"INPUT"===t.nodeName||"TEXTAREA"===t.nodeName?((e=t.hasAttribute("readonly"))||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),t.value):(t.hasAttribute("contenteditable")&&t.focus(),n=window.getSelection(),(e=document.createRange()).selectNodeContents(t),n.removeAllRanges(),n.addRange(e),n.toString());return n}},279:function(t){function e(){}e.prototype={on:function(t,e,n){var o=this.e||(this.e={});return(o[t]||(o[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var o=this;function r(){o.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),o=0,r=n.length;o<r;o++)n[o].fn.apply(n[o].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),o=n[t],r=[];if(o&&e)for(var i=0,u=o.length;i<u;i++)o[i].fn!==e&&o[i].fn._!==e&&r.push(o[i]);return r.length?n[t]=r:delete n[t],this}},t.exports=e,t.exports.TinyEmitter=e}},r={},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,{a:e}),e},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o(686).default;function o(t){if(r[t])return r[t].exports;var e=r[t]={exports:{}};return n[t](e,e.exports,o),e.exports}var n,r});
        </script>
        <script type="text/javascript">
        new ClipboardJS('.button')

        // fetch the app store link
        function getPlatformUrl(str) {
            var u = navigator.userAgent,
                isiOS = !!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),
                url = `${iOSUrl}`;
            if (!isiOS) {
                copyToClipboard(str)
                url = `${androidUrl}&referrer=${encodeURIComponent(str)}`;
            }
            return url;
        }

        function copyRedirectAction() {
            try {
                var copyText = ClipboardJS.copy(redirectAction)
                if (!copyText) {
                    copyToClipboard(redirectAction)
                }
            }catch (e) {
                copyToClipboard(redirectAction)
            }
        }

        // copy to clipboard
        function copyToClipboard(str) {
            var el = document.createElement('textarea');
            el.value = str;
            el.setAttribute('readonly', '');
            el.style.position = 'absolute';
            el.style.left = '-9999px';
            document.body.appendChild(el);
            var selected =
                document.getSelection().rangeCount > 0
                    ? document.getSelection().getRangeAt(0)
                    : false;
            el.select();
            document.execCommand('copy');
            document.body.removeChild(el);
            if (selected) {
                document.getSelection().removeAllRanges();
                document.getSelection().addRange(selected);
            }
        }
        // fetch url parameter
        function getQueryVariable(variable) {
            var query = window.location.search.substring(1);
            var vars = query.split("&");
            for (var i=0;i<vars.length;i++) {
                var pair = vars[i].split("=");
                if(pair[0] == variable){return pair[1];}
            }
            return(false);
        }

        // gtag report converison function
        function gtag_report_conversion(url) {
            try {
              var callback = function () {
                if (typeof(url) != 'undefined') {
                  window.location = url;
                }
              };
              gtag('event', 'conversion', {
                'send_to': googleCode,
                'event_callback': callback
              });
              return false;
            }catch (e){console.error(e)}
        }

        // fetch the redirect url
        function getRedirectAction(flag = false) {
            var ajax = new XMLHttpRequest();
            // fetch url paramter
            var adid = getQueryVariable("adid") || "",
                gclid = getQueryVariable("gclid") || "",
                gbraid = getQueryVariable("gbraid") || "",
                wbraid = getQueryVariable("wbraid") || ""
            // ajax to server and fetch the customized parameter
            ajax.open('get',`https://localhost/api?adid=${adid}&itemId=${itemId}&gclid=${gclid}&gbraid=${gbraid}&wbraid=${wbraid}&adtype=sem&url=${encodeURIComponent(window.location.href)}`);
            ajax.send();
            ajax.onreadystatechange = function () {
                if (ajax.readyState == 4) {
                    if (ajax.status == 200) {
                        redirectAction = `redirectAction:schema(itemId=${itemId}&traceid=${ajax.responseText}&adid=${adid}&adtype=sem)`;
                    } else {
                        redirectAction = `redirectAction:schema(itemId=${itemId}&traceid=0&adid=${adid}&adtype=sem)`;
                    }
                    document.querySelector('#copyDiv').innerHTML = redirectAction
                    if (flag) {
                        copyRedirectAction()
                        gtag_report_conversion(getPlatformUrl(redirectAction))
                    }
                }
            }
            // If you don't use ajax request
            // 
            // redirectAction = `redirectAction:schema(itemId=${itemId}&traceid=0&adid=${adid}&adtype=sem)`;
            // if (flag) {
            //     copyRedirectAction()
            //     gtag_report_conversion(getPlatformUrl(redirectAction))
            // }
        }
        // add click event to button
        document.getElementById("continue-button").addEventListener('click',function(){
            getRedirectAction(true)
        })
        getRedirectAction()
        gtag_report_conversion()
    </script>
    </div>
</body>
<script>
    let time = null;
    function setRem() {
        try {
            let htmlWidth = 0 || document.documentElement.clientWidth || document.body.clientWidth;
            let ratio = 20;

            let htmlDom = document.getElementsByTagName('html')[0];
            htmlDom.style.fontSize = htmlWidth / ratio + 'px';
        }catch (e) {}
    }
    setRem();
    window.onresize = function () {
        if (!window) return;
        setRem();
        clearTimeout(time);
        time = setTimeout(() => {
            setRem();
        }, 1000)
    }

</script>
</html>
